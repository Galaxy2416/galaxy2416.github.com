
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  
    <title>avr系列:(一)在linux下搭建avr开发平台 | IcePie&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="冰派">
    

    
    <meta name="description" content="此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。由于文章迁移手头没有avr一部分图片用的以前的，看颜色也能看出来，会在后期改掉的，但效果是ok的 系列说明：avr作为很成功的一系列芯片，在开源上受到了极大的关注，因为使其在linux环境下的开发充满乐趣和色彩。 环境如下：  OS系统：ubuntu 12.04（原为10.04最近升级了） 编译器 ：a">
<meta property="og:type" content="article">
<meta property="og:title" content="avr系列:(一)在linux下搭建avr开发平台">
<meta property="og:url" content="http://galaxy2416.github.io/2014/02/06/linux-avr-1/index.html">
<meta property="og:site_name" content="IcePie&#39;s blog">
<meta property="og:description" content="此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。由于文章迁移手头没有avr一部分图片用的以前的，看颜色也能看出来，会在后期改掉的，但效果是ok的 系列说明：avr作为很成功的一系列芯片，在开源上受到了极大的关注，因为使其在linux环境下的开发充满乐趣和色彩。 环境如下：  OS系统：ubuntu 12.04（原为10.04最近升级了） 编译器 ：a">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/make.png">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/lsusb.png">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/makepro.jpg">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/prook.jpg">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/avarice.jpg">
<meta property="og:image" content="http://galaxy2416.github.io/img/linux-avr-1/ddd.jpg">
<meta property="article:published_time" content="2014-02-06T12:59:49.000Z">
<meta property="article:modified_time" content="2021-09-26T02:51:38.966Z">
<meta property="article:author" content="冰派">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://galaxy2416.github.io/img/linux-avr-1/make.png">

    
    <link rel="alternative" href="/atom.xml" title="IcePie&#39;s blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/planets/planet_earth_venues_univearse_jupiter.png">
    
    
    <link rel="apple-touch-icon" href="/img/planets/planet_earth_venues_univearse_jupiter.png">
    <link rel="apple-touch-icon-precomposed" href="/img/planets/planet_earth_venues_univearse_jupiter.png">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/planets/planet_univearse_telestial_space_pluto.png" alt="IcePie&#39;s blog" title="IcePie&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="IcePie&#39;s blog">IcePie&#39;s blog</a></h1>
				<h2 class="blog-motto">语不惊人死不休</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:galaxy2416.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/02/06/linux-avr-1/" title="avr系列:(一)在linux下搭建avr开发平台" itemprop="url">avr系列:(一)在linux下搭建avr开发平台</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="冰派" target="_blank" itemprop="author">冰派</a>
		
  <p class="article-time">
    <time datetime="2014-02-06T12:59:49.000Z" itemprop="datePublished"> 发表于 2014-02-06</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A4%E7%AF%87%E4%BB%A5Ubuntu%E4%B8%8B%E7%9A%84atmeg16%EF%BC%8Cavr-gcc-usbasp%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AF%B4%E6%98%8E%E3%80%82"><span class="toc-number">1.</span> <span class="toc-text">此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。</span></a></li></ol>
		
		</div>
		
		<h3 id="此篇以Ubuntu下的atmeg16，avr-gcc-usbasp的开发环境搭建来进行说明。"><a href="#此篇以Ubuntu下的atmeg16，avr-gcc-usbasp的开发环境搭建来进行说明。" class="headerlink" title="此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。"></a>此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。</h3><p><strong>由于文章迁移手头没有avr一部分图片用的以前的，看颜色也能看出来，会在后期改掉的，但效果是ok的</strong></p>
<p>系列说明：avr作为很成功的一系列芯片，在开源上受到了极大的关注，因为使其在linux环境下的开发充满乐趣和色彩。</p>
<p>环境如下：</p>
<ul>
<li>OS系统：ubuntu 12.04（原为10.04最近升级了）</li>
<li>编译器 ：avr-gcc</li>
<li>烧录软件 :avrdude</li>
<li>调试软件:avarice ，GDB和ddd （可视界面）</li>
<li>开发板：</li>
</ul>
<ol>
<li><p> xplain(xmega128a1)无法调试，只能烧录，因为官方没有公开其调试的协议。</p>
</li>
<li><p> Mega16开发板。</p>
</li>
</ol>
<p>仿真器or烧录器：dragon和usbasp（使用较多）</p>
<span id="more"></span>
<hr>
<center>**关于使用前的准备和说明**</center>

<p>  至于为什么要使用linux下开发avr，原因主要是因为比较有趣。其次便是win下的环境用起来其实并不是很方便。IAR是付费软件（但是的确好用），Avr-studio虽然是免费版，不过优缺点是太过庞大，并且是以vc为基础开发，这个也就算不上真正的免费了。至于win-avr其实蛮不错的。win下也可以搭建如下环境,对于avr有一个比较帅气的项目可以快速开发使用avr-<a target="_blank" rel="noopener" href="http://www.arduino.cc/">Arduino</a>，不得不说这个项目简直漂亮极了，硬件和软件以及很多简单到极致的封装代码，感兴趣应该看看，在以后可能会介绍下。</p>
<p><code>软件准备工作:</code></p>
<p>软件安装建议使用ubuntu的软件中心，比较方便。需要avr-gcc，avrdude,avarice,gdb,ddd即可了。文本编辑什么都行。可以集成在codeblocks和eclipse里面。codeblocks如此做用起来感觉不错，原理都是一样的。</p>
<p>对于命令行可以如下安装。对于一些附带库和文档自行选择即可～</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install gcc-avrbinuilts-avr avr-libc</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install avrdude</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install avarice</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install gdb</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install ddd</span><br></pre></td></tr></table></figure>
<p>建议安装文档</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install avrdude-doc</span><br></pre></td></tr></table></figure>

<p><code>测试开始</code></p>
<p>开始之前需要先写一个main.c的程序</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// avr-gcc application builder : 2011-11-1 </span></span><br><span class="line"><span class="comment">// Target : M16</span></span><br><span class="line"><span class="comment">// Crystal: 12.000Mhz</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;avr/io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;util/delay.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SET(a,b) a|(1&lt;&lt;b)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLR(a,b) a &amp;~(1&lt;&lt;b)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">port_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> DDRA  = <span class="number">0xff</span>;<span class="comment">//将PA0定义为输出</span></span><br><span class="line"> PORTA = <span class="number">0xff</span>;</span><br><span class="line"> PORTB = <span class="number">0x00</span>;</span><br><span class="line"> DDRB  = <span class="number">0x00</span>;</span><br><span class="line"> PORTC = <span class="number">0x00</span>; <span class="comment">//m103 output only</span></span><br><span class="line"> DDRC  = <span class="number">0x00</span>;</span><br><span class="line"> PORTD = <span class="number">0x00</span>;</span><br><span class="line"> DDRD  = <span class="number">0x00</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//call this routine to initialize all peripherals</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init_devices</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">//stop errant interrupts until set up</span></span><br><span class="line"> <span class="comment">//CLI(); //disable all interrupts</span></span><br><span class="line"> port_init();</span><br><span class="line"> MCUCR = <span class="number">0x00</span>;</span><br><span class="line"> GICR  = <span class="number">0x00</span>;</span><br><span class="line"> TIMSK = <span class="number">0x00</span>; <span class="comment">//timer interrupt sources</span></span><br><span class="line"><span class="comment">// SEI(); //re-enable interrupts</span></span><br><span class="line"> <span class="comment">//all peripherals are now initialized</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> init_devices();</span><br><span class="line"> <span class="comment">//insert your functional code here...</span></span><br><span class="line"> PORTA = CLR(PORTA,<span class="number">3</span>);</span><br><span class="line"> <span class="keyword">while</span>(<span class="number">1</span>);  <span class="comment">//程序挂起		</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是一个很简单让一个小灯点亮的程序。</p>
<p>由于avr使用的是makefile模板，介绍下makefile，此物是简化操作流程的一个东西。让敲好多行命令才能完成的只需简单的一句话就行了。后文会附一个makefile的模板，是winavr下模板改的可用版。具体的内容是如何实现的，可以翻阅官方makefile手册和百度，谷歌。</p>
<p>简单介绍Makefile里面的几个命令，有过经验可以忽略这里</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#dragon_jtag</span></span><br><span class="line">AVRDUDE_PORT = usb   <span class="comment"># programmer connected to serial device</span></span><br><span class="line">AVRDUDE_WRITE_FLASH = -Uflash:w:<span class="variable">$(TARGET)</span>.hex</span><br><span class="line">AVRDUDE_FLAGS = -p <span class="variable">$(MCU)</span> -P<span class="variable">$(AVRDUDE_PORT)</span> -c <span class="variable">$(AVRDUDE_PROGRAMMER)</span></span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_NO_VERIFY)</span></span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_VERBOSE)</span></span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_ERASE_COUNTER)</span></span><br></pre></td></tr></table></figure>

<p>上面这些都是定义变量，makefile里的</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">program: <span class="variable">$(TARGET)</span>.hex <span class="variable">$(TARGET)</span>.eep</span></span><br><span class="line">     <span class="variable">$(AVRDUDE)</span><span class="variable">$(AVRDUDE_FLAGS)</span> <span class="variable">$(AVRDUDE_WRITE_FLASH)</span> <span class="variable">$(AVRDUDE_WRITE_EEPROM)</span></span><br></pre></td></tr></table></figure>

<p>当我们输入make program时就会执行上面这句之前的都不用关心了。翻译过来就变成了(如果叫main.hex)</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avrdude -<span class="selector-tag">P</span> usb -<span class="selector-tag">p</span> m16 -c usbasp -U flash:w:main.hex</span><br></pre></td></tr></table></figure>

<p>就是说用usb下的usbasp烧录m16的flash，内容为main.hex</p>
<p>如果用dragon的话一般用jtag就是-c dragon_jtag。具体可以查看avrdude手册。</p>
<p>了解之后先打开终端，找到.c文件目录下。Makefile文件放在同一目录下</p>
<p>根据需要更改其内容</p>
<p><code>编译</code></p>
<p>输入make</p>
<p>便会输出一些信息</p>
<p><img src="/img/linux-avr-1/make.png" alt="make"></p>
<p>编译成功之后就可以烧录了</p>
<p>烧录之前看一下烧录器是否在</p>
<p>输入lsusb</p>
<p><img src="/img/linux-avr-1/lsusb.png" alt="lsusb"></p>
<p>可以看到烧录器件存在。</p>
<p><code>烧录</code></p>
<p>输入<code>sudo make program</code></p>
<p><img src="/img/linux-avr-1/makepro.jpg" alt="makepro"></p>
<p>会在很快的时间内烧录成功。最后提示你烧录成功</p>
<p><img src="/img/linux-avr-1/prook.jpg" alt="prook"></p>
<p><code>调试</code></p>
<p>至于debug，usbasp没有这个功能。需要用dragon的jtag。</p>
<p>注：Debug其实不是很推荐使用，虽然比较高效，建议利用串口的信息输入输出（以后会介绍），这是因为在进入系统的嵌入后，常规的debug经常会无法使用。</p>
<p>实际使用要用avarice</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">avarice</span> <span class="literal">-</span><span class="comment">g</span> <span class="literal">-</span><span class="comment">j</span> <span class="comment">usb</span> --<span class="comment">erase</span> --<span class="comment">program</span> --<span class="comment">filemain</span><span class="string">.</span><span class="comment">hex</span> <span class="comment">:4242</span> </span><br></pre></td></tr></table></figure>

<p>不过如果makefile里已经写好的话直接输入`sudo make debug``就可以了</p>
<p>下面为命令的结果</p>
<p><img src="/img/linux-avr-1/avarice.jpg" alt="avarice"></p>
<p><em>由于我的dragon被物主回收了，所以只能用老图了</em></p>
<p>现在属于等待GDB，可视化的话就是DDD的状态中了</p>
<p>比如在gdb.conf中添加</p>
<p>file main.elf</p>
<p>target remotelocalhost:4242</p>
<p>启动DDD</p>
<p><code>ddd–-debugger “avr-gdb -x gdb.conf”</code></p>
<p><img src="/img/linux-avr-1/ddd.jpg" alt="ddd"></p>
<p>也可以手起动，然后配置，ui界面比较友好。</p>
<p>还有一句话。makefile里面已经把上步骤都做好了～当然会根据需求要求更改的。尤其是debug的时候。</p>
<p>总结：本文所说有些简略了，linux开发的困难主要在于搭建环境，因此需要多看一下相关的官方手册。</p>
<hr>
<p><strong>附录：</strong></p>
<p>模板Makefile(内容请自行修改)</p>
<p>make : 编译</p>
<p>make program : 烧录</p>
<p>make debug : 调试</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hey Vim, this is a -*- makefile -*-  </span></span><br><span class="line"><span class="comment">#----------------------------------------------------------------------------  </span></span><br><span class="line"><span class="comment"># WinAVR Makefile Template written by Eric B. Weddington, Jörg Wunsch, et al.  </span></span><br><span class="line"><span class="comment"># Linux GCC using is changed by Galaxy2416  </span></span><br><span class="line"><span class="comment"># Released to the Public Domain  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># Additional material for this makefile was written by:  </span></span><br><span class="line"><span class="comment"># Peter Fleury  </span></span><br><span class="line"><span class="comment"># Tim Henigan  </span></span><br><span class="line"><span class="comment"># Colin O&#x27;Flynn  </span></span><br><span class="line"><span class="comment"># Reiner Patommel  </span></span><br><span class="line"><span class="comment"># Markus Pfaff  </span></span><br><span class="line"><span class="comment"># Sander Pool  </span></span><br><span class="line"><span class="comment"># Frederik Rouleau  </span></span><br><span class="line"><span class="comment"># Carlos Lamas  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment">#----------------------------------------------------------------------------  </span></span><br><span class="line"><span class="comment"># On command line:  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make all = Make software.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make clean = Clean out built project files.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make coff = Convert ELF to AVR COFF.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make extcoff = Convert ELF to AVR Extended COFF.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make program = Download the hex file to the device, using avrdude.  </span></span><br><span class="line"><span class="comment">#                Please customize the avrdude settings below first!  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make debug = Start either simulavr or avarice as specified for debugging,   </span></span><br><span class="line"><span class="comment">#              with avr-gdb or avr-insight as the front end for debugging.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make filename.s = Just compile filename.c into the assembler code only.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># make filename.i = Create a preprocessed source file for use in submitting  </span></span><br><span class="line"><span class="comment">#                   bug reports to the GCC project.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># To rebuild project do &quot;make clean&quot; then &quot;make all&quot;.  </span></span><br><span class="line"><span class="comment">#----------------------------------------------------------------------------  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># MCU name  </span></span><br><span class="line">MCU = atmega16  </span><br><span class="line"><span class="comment">#atxmega128a1  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Processor frequency.  </span></span><br><span class="line"><span class="comment">#     This will define a symbol, F_CPU, in all source code files equal to the   </span></span><br><span class="line"><span class="comment">#     processor frequency. You can then use this symbol in your source code to   </span></span><br><span class="line"><span class="comment">#     calculate timings. Do NOT tack on a &#x27;UL&#x27; at the end, this will be done  </span></span><br><span class="line"><span class="comment">#     automatically to create a 32-bit value in your source code.  </span></span><br><span class="line"><span class="comment">#     Typical values are:  </span></span><br><span class="line"><span class="comment">#         F_CPU =  1000000  </span></span><br><span class="line"><span class="comment">#         F_CPU =  1843200  </span></span><br><span class="line"><span class="comment">#         F_CPU =  2000000  </span></span><br><span class="line"><span class="comment">#         F_CPU =  3686400  </span></span><br><span class="line"><span class="comment">#         F_CPU =  4000000  </span></span><br><span class="line"><span class="comment">#         F_CPU =  7372800  </span></span><br><span class="line"><span class="comment">#         F_CPU =  8000000  </span></span><br><span class="line"><span class="comment">#         F_CPU = 11059200  </span></span><br><span class="line"><span class="comment">#         F_CPU = 14745600  </span></span><br><span class="line"><span class="comment">#         F_CPU = 16000000  </span></span><br><span class="line"><span class="comment">#         F_CPU = 18432000  </span></span><br><span class="line"><span class="comment">#         F_CPU = 20000000  </span></span><br><span class="line">F_CPU = 8000000  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Output format. (can be srec, ihex, binary)  </span></span><br><span class="line">FORMAT = ihex  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Target file name (without extension).  </span></span><br><span class="line">TARGET = main  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Object files directory  </span></span><br><span class="line"><span class="comment">#     To put object files in current directory, use a dot (.), do NOT make  </span></span><br><span class="line"><span class="comment">#     this an empty or blank macro!  </span></span><br><span class="line">OBJDIR = .  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># List C source files here. (C dependencies are automatically generated.)  </span></span><br><span class="line">SRC = <span class="variable">$(TARGET)</span>.c   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># List C++ source files here. (C dependencies are automatically generated.)  </span></span><br><span class="line">CPPSRC =   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># List Assembler source files here.  </span></span><br><span class="line"><span class="comment">#     Make them always end in a capital .S.  Files ending in a lowercase .s  </span></span><br><span class="line"><span class="comment">#     will not be considered source files but generated files (assembler  </span></span><br><span class="line"><span class="comment">#     output from the compiler), and will be deleted upon &quot;make clean&quot;!  </span></span><br><span class="line"><span class="comment">#     Even though the DOS/Win* filesystem matches both .s and .S the same,  </span></span><br><span class="line"><span class="comment">#     it will preserve the spelling of the filenames, and gcc itself does  </span></span><br><span class="line"><span class="comment">#     care about how the name is spelled on its command-line.  </span></span><br><span class="line">ASRC =  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Optimization level, can be [0, 1, 2, 3, s].   </span></span><br><span class="line"><span class="comment">#     0 = turn off optimization. s = optimize for size.  </span></span><br><span class="line"><span class="comment">#     (Note: 3 is not always the best optimization level. See avr-libc FAQ.)  </span></span><br><span class="line">OPT = s  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Debugging format.  </span></span><br><span class="line"><span class="comment">#     Native formats for AVR-GCC&#x27;s -g are dwarf-2 [default] or stabs.  </span></span><br><span class="line"><span class="comment">#     AVR Studio 4.10 requires dwarf-2.  </span></span><br><span class="line"><span class="comment">#     AVR [Extended] COFF format requires stabs, plus an avr-objcopy run.  </span></span><br><span class="line">DEBUG = dwarf-2  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># List any extra directories to look for include files here.  </span></span><br><span class="line"><span class="comment">#     Each directory must be seperated by a space.  </span></span><br><span class="line"><span class="comment">#     Use forward slashes for directory separators.  </span></span><br><span class="line"><span class="comment">#     For a directory that has spaces, enclose it in quotes.  </span></span><br><span class="line">EXTRAINCDIRS =   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compiler flag to set the C Standard level.  </span></span><br><span class="line"><span class="comment">#     c89   = &quot;ANSI&quot; C  </span></span><br><span class="line"><span class="comment">#     gnu89 = c89 plus GCC extensions  </span></span><br><span class="line"><span class="comment">#     c99   = ISO C99 standard (not yet fully implemented)  </span></span><br><span class="line"><span class="comment">#     gnu99 = c99 plus GCC extensions  </span></span><br><span class="line">CSTANDARD = -std=gnu99  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Place -D or -U options here for C sources  </span></span><br><span class="line">CDEFS = -DF_CPU=<span class="variable">$(F_CPU)</span>UL  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Place -D or -U options here for ASM sources  </span></span><br><span class="line">ADEFS = -DF_CPU=<span class="variable">$(F_CPU)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Place -D or -U options here for C++ sources  </span></span><br><span class="line">CPPDEFS = -DF_CPU=<span class="variable">$(F_CPU)</span>UL  </span><br><span class="line"><span class="comment">#CPPDEFS += -D__STDC_LIMIT_MACROS  </span></span><br><span class="line"><span class="comment">#CPPDEFS += -D__STDC_CONSTANT_MACROS  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Compiler Options C ----------------  </span></span><br><span class="line"><span class="comment">#  -g*:          generate debugging information  </span></span><br><span class="line"><span class="comment">#  -O*:          optimization level  </span></span><br><span class="line"><span class="comment">#  -f...:        tuning, see GCC manual and avr-libc documentation  </span></span><br><span class="line"><span class="comment">#  -Wall...:     warning level  </span></span><br><span class="line"><span class="comment">#  -Wa,...:      tell GCC to pass this to the assembler.  </span></span><br><span class="line"><span class="comment">#    -adhlns...: create assembler listing  </span></span><br><span class="line">CFLAGS = -g<span class="variable">$(DEBUG)</span>  </span><br><span class="line">CFLAGS += <span class="variable">$(CDEFS)</span>  </span><br><span class="line">CFLAGS += -O<span class="variable">$(OPT)</span>  </span><br><span class="line">CFLAGS += -funsigned-char  </span><br><span class="line">CFLAGS += -funsigned-bitfields  </span><br><span class="line">CFLAGS += -fpack-struct  </span><br><span class="line">CFLAGS += -fshort-enums  </span><br><span class="line">CFLAGS += -Wall  </span><br><span class="line">CFLAGS += -Wstrict-prototypes  </span><br><span class="line"><span class="comment">#CFLAGS += -mshort-calls  </span></span><br><span class="line"><span class="comment">#CFLAGS += -fno-unit-at-a-time  </span></span><br><span class="line"><span class="comment">#CFLAGS += -Wundef  </span></span><br><span class="line"><span class="comment">#CFLAGS += -Wunreachable-code  </span></span><br><span class="line"><span class="comment">#CFLAGS += -Wsign-compare  </span></span><br><span class="line">CFLAGS += -Wa,-adhlns=$(&lt;:%.c=<span class="variable">$(OBJDIR)</span>/%.lst)  </span><br><span class="line">CFLAGS += <span class="variable">$(<span class="built_in">patsubst</span> %,-I%,<span class="variable">$(EXTRAINCDIRS)</span>)</span>  </span><br><span class="line">CFLAGS += <span class="variable">$(CSTANDARD)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Compiler Options C++ ----------------  </span></span><br><span class="line"><span class="comment">#  -g*:          generate debugging information  </span></span><br><span class="line"><span class="comment">#  -O*:          optimization level  </span></span><br><span class="line"><span class="comment">#  -f...:        tuning, see GCC manual and avr-libc documentation  </span></span><br><span class="line"><span class="comment">#  -Wall...:     warning level  </span></span><br><span class="line"><span class="comment">#  -Wa,...:      tell GCC to pass this to the assembler.  </span></span><br><span class="line"><span class="comment">#    -adhlns...: create assembler listing  </span></span><br><span class="line">CPPFLAGS = -g<span class="variable">$(DEBUG)</span>  </span><br><span class="line">CPPFLAGS += <span class="variable">$(CPPDEFS)</span>  </span><br><span class="line">CPPFLAGS += -O<span class="variable">$(OPT)</span>  </span><br><span class="line">CPPFLAGS += -funsigned-char  </span><br><span class="line">CPPFLAGS += -funsigned-bitfields  </span><br><span class="line">CPPFLAGS += -fpack-struct  </span><br><span class="line">CPPFLAGS += -fshort-enums  </span><br><span class="line">CPPFLAGS += -fno-exceptions  </span><br><span class="line">CPPFLAGS += -Wall  </span><br><span class="line">CPPFLAGS += -Wundef  </span><br><span class="line"><span class="comment">#CPPFLAGS += -mshort-calls  </span></span><br><span class="line"><span class="comment">#CPPFLAGS += -fno-unit-at-a-time  </span></span><br><span class="line"><span class="comment">#CPPFLAGS += -Wstrict-prototypes  </span></span><br><span class="line"><span class="comment">#CPPFLAGS += -Wunreachable-code  </span></span><br><span class="line"><span class="comment">#CPPFLAGS += -Wsign-compare  </span></span><br><span class="line">CPPFLAGS += -Wa,-adhlns=$(&lt;:%.cpp=<span class="variable">$(OBJDIR)</span>/%.lst)  </span><br><span class="line">CPPFLAGS += <span class="variable">$(<span class="built_in">patsubst</span> %,-I%,<span class="variable">$(EXTRAINCDIRS)</span>)</span>  </span><br><span class="line"><span class="comment">#CPPFLAGS += $(CSTANDARD)  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Assembler Options ----------------  </span></span><br><span class="line"><span class="comment">#  -Wa,...:   tell GCC to pass this to the assembler.  </span></span><br><span class="line"><span class="comment">#  -adhlns:   create listing  </span></span><br><span class="line"><span class="comment">#  -gstabs:   have the assembler create line number information; note that  </span></span><br><span class="line"><span class="comment">#             for use in COFF files, additional information about filenames  </span></span><br><span class="line"><span class="comment">#             and function names needs to be present in the assembler source  </span></span><br><span class="line"><span class="comment">#             files -- see avr-libc docs [<span class="doctag">FIXME:</span> not yet described there]  </span></span><br><span class="line"><span class="comment">#  -listing-cont-lines: Sets the maximum number of continuation lines of hex   </span></span><br><span class="line"><span class="comment">#       dump that will be displayed for a given single line of source input.  </span></span><br><span class="line">ASFLAGS = <span class="variable">$(ADEFS)</span> -Wa,-adhlns=$(&lt;:%.S=<span class="variable">$(OBJDIR)</span>/%.lst),-gstabs,--listing-cont-lines=100  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Library Options ----------------  </span></span><br><span class="line"><span class="comment"># Minimalistic printf version  </span></span><br><span class="line">PRINTF_LIB_MIN = -Wl,-u,vfprintf -lprintf_min  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Floating point printf version (requires MATH_LIB = -lm below)  </span></span><br><span class="line">PRINTF_LIB_FLOAT = -Wl,-u,vfprintf -lprintf_flt  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># If this is left blank, then it will use the Standard printf version.  </span></span><br><span class="line">PRINTF_LIB =   </span><br><span class="line"><span class="comment">#PRINTF_LIB = $(PRINTF_LIB_MIN)  </span></span><br><span class="line"><span class="comment">#PRINTF_LIB = $(PRINTF_LIB_FLOAT)  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Minimalistic scanf version  </span></span><br><span class="line">SCANF_LIB_MIN = -Wl,-u,vfscanf -lscanf_min  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Floating point + %[ scanf version (requires MATH_LIB = -lm below)  </span></span><br><span class="line">SCANF_LIB_FLOAT = -Wl,-u,vfscanf -lscanf_flt  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># If this is left blank, then it will use the Standard scanf version.  </span></span><br><span class="line">SCANF_LIB =   </span><br><span class="line"><span class="comment">#SCANF_LIB = $(SCANF_LIB_MIN)  </span></span><br><span class="line"><span class="comment">#SCANF_LIB = $(SCANF_LIB_FLOAT)  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">MATH_LIB = -lm  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># List any extra directories to look for libraries here.  </span></span><br><span class="line"><span class="comment">#     Each directory must be seperated by a space.  </span></span><br><span class="line"><span class="comment">#     Use forward slashes for directory separators.  </span></span><br><span class="line"><span class="comment">#     For a directory that has spaces, enclose it in quotes.  </span></span><br><span class="line">EXTRALIBDIRS =   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- External Memory Options ----------------  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 64 KB of external RAM, starting after internal RAM (ATmega128!),  </span></span><br><span class="line"><span class="comment"># used for variables (.data/.bss) and heap (malloc()).  </span></span><br><span class="line"><span class="comment">#EXTMEMOPTS = -Wl,-Tdata=0x801100,--defsym=__heap_end=0x80ffff  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 64 KB of external RAM, starting after internal RAM (ATmega128!),  </span></span><br><span class="line"><span class="comment"># only used for heap (malloc()).  </span></span><br><span class="line"><span class="comment">#EXTMEMOPTS = -Wl,--section-start,.data=0x801100,--defsym=__heap_end=0x80ffff  </span></span><br><span class="line">  </span><br><span class="line">EXTMEMOPTS =  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Linker Options ----------------  </span></span><br><span class="line"><span class="comment">#  -Wl,...:     tell GCC to pass this to linker.  </span></span><br><span class="line"><span class="comment">#    -Map:      create map file  </span></span><br><span class="line"><span class="comment">#    --cref:    add cross reference to  map file  </span></span><br><span class="line">LDFLAGS = -Wl,-Map=<span class="variable">$(TARGET)</span>.map,--cref  </span><br><span class="line">LDFLAGS += <span class="variable">$(EXTMEMOPTS)</span>  </span><br><span class="line">LDFLAGS += <span class="variable">$(<span class="built_in">patsubst</span> %,-L%,<span class="variable">$(EXTRALIBDIRS)</span>)</span>  </span><br><span class="line">LDFLAGS += <span class="variable">$(PRINTF_LIB)</span> <span class="variable">$(SCANF_LIB)</span> <span class="variable">$(MATH_LIB)</span>  </span><br><span class="line"><span class="comment">#LDFLAGS += -T linker_script.x  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Programming Options (avrdude) ----------------  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Programming hardware  </span></span><br><span class="line"><span class="comment"># Type: avrdude -c ?  </span></span><br><span class="line"><span class="comment"># to get a full listing.  </span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line">AVRDUDE_PROGRAMMER = usbasp  </span><br><span class="line"><span class="comment">#dragon_jtag  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># com1 = serial port. Use lpt1 to connect to parallel port.  </span></span><br><span class="line">AVRDUDE_PORT = usb   <span class="comment"># programmer connected to serial device  </span></span><br><span class="line">  </span><br><span class="line">AVRDUDE_WRITE_FLASH = -U flash:w:<span class="variable">$(TARGET)</span>.hex  </span><br><span class="line"><span class="comment">#AVRDUDE_WRITE_EEPROM = -U eeprom:w:$(TARGET).eep  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Uncomment the following if you want avrdude&#x27;s erase cycle counter.  </span></span><br><span class="line"><span class="comment"># Note that this counter needs to be initialized first using -Yn,  </span></span><br><span class="line"><span class="comment"># see avrdude manual.  </span></span><br><span class="line"><span class="comment">#AVRDUDE_ERASE_COUNTER = -y  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Uncomment the following if you do /not/ wish a verification to be  </span></span><br><span class="line"><span class="comment"># performed after programming the device.  </span></span><br><span class="line"><span class="comment">#AVRDUDE_NO_VERIFY = -V  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Increase verbosity level.  Please use this when submitting bug  </span></span><br><span class="line"><span class="comment"># reports about avrdude. See &lt;http://savannah.nongnu.org/projects/avrdude&gt;   </span></span><br><span class="line"><span class="comment"># to submit bug reports.  </span></span><br><span class="line"><span class="comment">#AVRDUDE_VERBOSE = -v -v  </span></span><br><span class="line">  </span><br><span class="line">AVRDUDE_FLAGS = -p <span class="variable">$(MCU)</span> -P <span class="variable">$(AVRDUDE_PORT)</span> -c <span class="variable">$(AVRDUDE_PROGRAMMER)</span>  </span><br><span class="line"><span class="comment">#AVRDUDE_FLAGS = -p m16 -P $(AVRDUDE_PORT) -c $(AVRDUDE_PROGRAMMER)  </span></span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_NO_VERIFY)</span>  </span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_VERBOSE)</span>  </span><br><span class="line">AVRDUDE_FLAGS += <span class="variable">$(AVRDUDE_ERASE_COUNTER)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#---------------- Debugging Options ----------------  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># For simulavr only - target MCU frequency.  </span></span><br><span class="line">DEBUG_MFREQ = <span class="variable">$(F_CPU)</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Set the DEBUG_UI to either gdb or insight.  </span></span><br><span class="line"><span class="comment"># DEBUG_UI = gdb  </span></span><br><span class="line">DEBUG_UI = gdb  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Set the debugging back-end to either avarice, simulavr.  </span></span><br><span class="line">DEBUG_BACKEND = avarice  </span><br><span class="line"><span class="comment">#DEBUG_BACKEND = simulavr  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># GDB Init Filename.  </span></span><br><span class="line">GDBINIT_FILE = __avr_gdbinit  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># When using avarice settings for the JTAG  </span></span><br><span class="line">JTAG_DEV = usb  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Debugging port used to communicate between GDB / avarice / simulavr.  </span></span><br><span class="line">DEBUG_PORT = 4242  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Debugging host used to communicate between GDB / avarice / simulavr, normally  </span></span><br><span class="line"><span class="comment">#     just set to localhost unless doing some sort of crazy debugging when   </span></span><br><span class="line"><span class="comment">#     avarice is running on a different computer.  </span></span><br><span class="line">DEBUG_HOST = localhost  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#============================================================================  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Define programs and commands.  </span></span><br><span class="line">SHELL = sh  </span><br><span class="line">CC = avr-gcc  </span><br><span class="line">OBJCOPY = avr-objcopy  </span><br><span class="line">OBJDUMP = avr-objdump  </span><br><span class="line">SIZE = avr-size  </span><br><span class="line">AR = avr-ar rcs  </span><br><span class="line">NM = avr-nm  </span><br><span class="line">AVRDUDE = avrdude  </span><br><span class="line">REMOVE = rm -f  </span><br><span class="line">REMOVEDIR = rm -rf  </span><br><span class="line">COPY = cp  </span><br><span class="line">WINSHELL =   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Define Messages  </span></span><br><span class="line"><span class="comment"># English  </span></span><br><span class="line">MSG_ERRORS_NONE = Errors: none  </span><br><span class="line">MSG_BEGIN = -------- begin --------  </span><br><span class="line">MSG_END = --------  end  --------  </span><br><span class="line">MSG_SIZE_BEFORE = Size before:   </span><br><span class="line">MSG_SIZE_AFTER = Size after:  </span><br><span class="line">MSG_COFF = Converting to AVR COFF:  </span><br><span class="line">MSG_EXTENDED_COFF = Converting to AVR Extended COFF:  </span><br><span class="line">MSG_FLASH = Creating load file for Flash:  </span><br><span class="line">MSG_EEPROM = Creating load file for EEPROM:  </span><br><span class="line">MSG_EXTENDED_LISTING = Creating Extended Listing:  </span><br><span class="line">MSG_SYMBOL_TABLE = Creating Symbol Table:  </span><br><span class="line">MSG_LINKING = Linking:  </span><br><span class="line">MSG_COMPILING = Compiling C:  </span><br><span class="line">MSG_COMPILING_CPP = Compiling C++:  </span><br><span class="line">MSG_ASSEMBLING = Assembling:  </span><br><span class="line">MSG_CLEANING = Cleaning project:  </span><br><span class="line">MSG_CREATING_LIBRARY = Creating library:  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Define all object files.  </span></span><br><span class="line">OBJ = $(SRC:%.c=<span class="variable">$(OBJDIR)</span>/%.o) $(CPPSRC:%.cpp=<span class="variable">$(OBJDIR)</span>/%.o) $(ASRC:%.S=<span class="variable">$(OBJDIR)</span>/%.o)   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Define all listing files.  </span></span><br><span class="line">LST = $(SRC:%.c=<span class="variable">$(OBJDIR)</span>/%.lst) $(CPPSRC:%.cpp=<span class="variable">$(OBJDIR)</span>/%.lst) $(ASRC:%.S=<span class="variable">$(OBJDIR)</span>/%.lst)   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compiler flags to generate dependency files.  </span></span><br><span class="line">GENDEPFLAGS = -MMD -MP -MF .dep/$(@F).d  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Combine all necessary flags and optional flags.  </span></span><br><span class="line"><span class="comment"># Add target processor to flags.  </span></span><br><span class="line">ALL_CFLAGS = -mmcu=<span class="variable">$(MCU)</span> -I. <span class="variable">$(CFLAGS)</span> <span class="variable">$(GENDEPFLAGS)</span>  </span><br><span class="line">ALL_CPPFLAGS = -mmcu=<span class="variable">$(MCU)</span> -I. -x c++ <span class="variable">$(CPPFLAGS)</span> <span class="variable">$(GENDEPFLAGS)</span>  </span><br><span class="line">ALL_ASFLAGS = -mmcu=<span class="variable">$(MCU)</span> -I. -x assembler-with-cpp <span class="variable">$(ASFLAGS)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Default target.  </span></span><br><span class="line"><span class="section">all: begin gccversion sizebefore build sizeafter end  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Change the build target to build a HEX file or a library.  </span></span><br><span class="line"><span class="section">build: elf hex eep lss sym  </span></span><br><span class="line"><span class="comment">#build: lib  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="section">elf: <span class="variable">$(TARGET)</span>.elf  </span></span><br><span class="line"><span class="section">hex: <span class="variable">$(TARGET)</span>.hex  </span></span><br><span class="line"><span class="section">eep: <span class="variable">$(TARGET)</span>.eep  </span></span><br><span class="line"><span class="section">lss: <span class="variable">$(TARGET)</span>.lss  </span></span><br><span class="line"><span class="section">sym: <span class="variable">$(TARGET)</span>.sym  </span></span><br><span class="line">LIBNAME=lib<span class="variable">$(TARGET)</span>.a  </span><br><span class="line"><span class="section">lib: <span class="variable">$(LIBNAME)</span>  </span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Eye candy.  </span></span><br><span class="line"><span class="comment"># AVR Studio 3.x does not check make&#x27;s exit code but relies on  </span></span><br><span class="line"><span class="comment"># the following magic strings to be generated by the compile job.  </span></span><br><span class="line"><span class="section">begin:  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_BEGIN)</span>  </span><br><span class="line">  </span><br><span class="line"><span class="section">end:  </span></span><br><span class="line">    @echo <span class="variable">$(MSG_END)</span>  </span><br><span class="line">    @echo  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Display size of file.  </span></span><br><span class="line">HEXSIZE = <span class="variable">$(SIZE)</span> --target=<span class="variable">$(FORMAT)</span> <span class="variable">$(TARGET)</span>.hex  </span><br><span class="line">ELFSIZE = <span class="variable">$(SIZE)</span> --mcu=<span class="variable">$(MCU)</span> --format=avr <span class="variable">$(TARGET)</span>.elf  </span><br><span class="line">  </span><br><span class="line"><span class="section">sizebefore:  </span></span><br><span class="line">    @if test -f <span class="variable">$(TARGET)</span>.elf; then echo; echo <span class="variable">$(MSG_SIZE_BEFORE)</span>; <span class="variable">$(ELFSIZE)</span>; \  </span><br><span class="line">    2&gt;/dev/null; echo; fi  </span><br><span class="line">  </span><br><span class="line"><span class="section">sizeafter:  </span></span><br><span class="line">    @if test -f <span class="variable">$(TARGET)</span>.elf; then echo; echo <span class="variable">$(MSG_SIZE_AFTER)</span>; <span class="variable">$(ELFSIZE)</span>; \  </span><br><span class="line">    2&gt;/dev/null; echo; fi  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Display compiler version information.  </span></span><br><span class="line">gccversion :   </span><br><span class="line">    @<span class="variable">$(CC)</span> --version  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Program the device.    </span></span><br><span class="line"><span class="section">program: <span class="variable">$(TARGET)</span>.hex <span class="variable">$(TARGET)</span>.eep  </span></span><br><span class="line">    <span class="variable">$(AVRDUDE)</span> <span class="variable">$(AVRDUDE_FLAGS)</span> <span class="variable">$(AVRDUDE_WRITE_FLASH)</span> <span class="variable">$(AVRDUDE_WRITE_EEPROM)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Generate avr-gdb config/init file which does the following:  </span></span><br><span class="line"><span class="comment">#     define the reset signal, load the target file, connect to target, and set   </span></span><br><span class="line"><span class="comment">#     a breakpoint at main().  </span></span><br><span class="line"><span class="section">gdb-config:   </span></span><br><span class="line">    @<span class="variable">$(REMOVE)</span> <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">    @echo <span class="keyword">define</span> reset &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">    @echo SIGNAL SIGHUP &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">    @echo end &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">    @echo file <span class="variable">$(TARGET)</span>.elf &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">    @echo target remote <span class="variable">$(DEBUG_HOST)</span>:<span class="variable">$(DEBUG_PORT)</span>  &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(DEBUG_BACKEND)</span>,simulavr)  </span><br><span class="line">    @echo load  &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line"><span class="keyword">endif</span>  </span><br><span class="line">    @echo break main &gt;&gt; <span class="variable">$(GDBINIT_FILE)</span>  </span><br><span class="line">  </span><br><span class="line"><span class="section">debug: gdb-config <span class="variable">$(TARGET)</span>.elf  </span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(DEBUG_BACKEND)</span>, avarice)  </span><br><span class="line">    @echo Starting AVaRICE - Press enter when <span class="string">&quot;waiting to connect&quot;</span> message displays.  </span><br><span class="line">    <span class="comment">#@$(WINSHELL) /c start avarice --jtag $(JTAG_DEV) --erase --program --file \  </span></span><br><span class="line">    <span class="comment">#$(TARGET).hex $(DEBUG_HOST):$(DEBUG_PORT)  </span></span><br><span class="line">    <span class="comment">#@$(WINSHELL) /c pause  </span></span><br><span class="line">    @<span class="variable">$(WINSHELL)</span>  avarice --xmega -g --jtag <span class="variable">$(JTAG_DEV)</span> --erase --program --file   \  </span><br><span class="line">    <span class="variable">$(TARGET)</span>.elf:<span class="variable">$(DEBUG_PORT)</span>  </span><br><span class="line">    <span class="comment">#@$(WINSHELL)  pause  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">else</span>  </span><br><span class="line">    @<span class="variable">$(WINSHELL)</span> /c start simulavr --gdbserver --device <span class="variable">$(MCU)</span> --clock-freq \  </span><br><span class="line">    <span class="variable">$(DEBUG_MFREQ)</span> --port <span class="variable">$(DEBUG_PORT)</span>  </span><br><span class="line"><span class="keyword">endif</span>  </span><br><span class="line">    <span class="comment">#@$(WINSHELL) /c start avr-$(DEBUG_UI) --command=$(GDBINIT_FILE)  </span></span><br><span class="line">    @<span class="variable">$(WINSHELL)</span>  <span class="variable">$(DEBUG_UI)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Convert ELF to COFF for use in debugging / simulating in AVR Studio or VMLAB.  </span></span><br><span class="line">COFFCONVERT = <span class="variable">$(OBJCOPY)</span> --debugging  </span><br><span class="line">COFFCONVERT += --change-section-address .data-0x800000  </span><br><span class="line">COFFCONVERT += --change-section-address .bss-0x800000  </span><br><span class="line">COFFCONVERT += --change-section-address .noinit-0x800000  </span><br><span class="line">COFFCONVERT += --change-section-address .eeprom-0x810000  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="section">coff: <span class="variable">$(TARGET)</span>.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_COFF)</span> <span class="variable">$(TARGET)</span>.cof  </span><br><span class="line">    <span class="variable">$(COFFCONVERT)</span> -O coff-avr <span class="variable">$&lt;</span> <span class="variable">$(TARGET)</span>.cof  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="section">extcoff: <span class="variable">$(TARGET)</span>.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_EXTENDED_COFF)</span> <span class="variable">$(TARGET)</span>.cof  </span><br><span class="line">    <span class="variable">$(COFFCONVERT)</span> -O coff-ext-avr <span class="variable">$&lt;</span> <span class="variable">$(TARGET)</span>.cof  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create final output files (.hex, .eep) from ELF output file.  </span></span><br><span class="line"><span class="section">%.hex: %.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_FLASH)</span> <span class="variable">$@</span>  </span><br><span class="line">    <span class="variable">$(OBJCOPY)</span> -O <span class="variable">$(FORMAT)</span> -R .eeprom -R .fuse -R .lock <span class="variable">$&lt;</span> <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line"><span class="section">%.eep: %.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_EEPROM)</span> <span class="variable">$@</span>  </span><br><span class="line">    -<span class="variable">$(OBJCOPY)</span> -j .eeprom --set-section-flags=.eeprom=<span class="string">&quot;alloc,load&quot;</span> \  </span><br><span class="line">    --change-section-lma .eeprom=0 --no-change-warnings -O <span class="variable">$(FORMAT)</span> <span class="variable">$&lt;</span> <span class="variable">$@</span> || exit 0  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create extended listing file from ELF output file.  </span></span><br><span class="line"><span class="section">%.lss: %.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_EXTENDED_LISTING)</span> <span class="variable">$@</span>  </span><br><span class="line">    <span class="variable">$(OBJDUMP)</span> -h -S -z <span class="variable">$&lt;</span> &gt; <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create a symbol table from ELF output file.  </span></span><br><span class="line"><span class="section">%.sym: %.elf  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_SYMBOL_TABLE)</span> <span class="variable">$@</span>  </span><br><span class="line">    <span class="variable">$(NM)</span> -n <span class="variable">$&lt;</span> &gt; <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create library from object files.  </span></span><br><span class="line">.SECONDARY : <span class="variable">$(TARGET)</span>.a  </span><br><span class="line">.PRECIOUS : <span class="variable">$(OBJ)</span>  </span><br><span class="line"><span class="section">%.a: <span class="variable">$(OBJ)</span>  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_CREATING_LIBRARY)</span> <span class="variable">$@</span>  </span><br><span class="line">    <span class="variable">$(AR)</span> <span class="variable">$@</span> <span class="variable">$(OBJ)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Link: create ELF output file from object files.  </span></span><br><span class="line">.SECONDARY : <span class="variable">$(TARGET)</span>.elf  </span><br><span class="line">.PRECIOUS : <span class="variable">$(OBJ)</span>  </span><br><span class="line"><span class="section">%.elf: <span class="variable">$(OBJ)</span>  </span></span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_LINKING)</span> <span class="variable">$@</span>  </span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(ALL_CFLAGS)</span> <span class="variable">$^</span> --output <span class="variable">$@</span> <span class="variable">$(LDFLAGS)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compile: create object files from C source files.  </span></span><br><span class="line"><span class="variable">$(OBJDIR)</span>/%.o : %.c  </span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_COMPILING)</span> <span class="variable">$&lt;</span>  </span><br><span class="line">    <span class="variable">$(CC)</span> -c <span class="variable">$(ALL_CFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compile: create object files from C++ source files.  </span></span><br><span class="line"><span class="variable">$(OBJDIR)</span>/%.o : %.cpp  </span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_COMPILING_CPP)</span> <span class="variable">$&lt;</span>  </span><br><span class="line">    <span class="variable">$(CC)</span> -c <span class="variable">$(ALL_CPPFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compile: create assembler files from C source files.  </span></span><br><span class="line">%.s : %.c  </span><br><span class="line">    <span class="variable">$(CC)</span> -S <span class="variable">$(ALL_CFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Compile: create assembler files from C++ source files.  </span></span><br><span class="line">%.s : %.cpp  </span><br><span class="line">    <span class="variable">$(CC)</span> -S <span class="variable">$(ALL_CPPFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Assemble: create object files from assembler source files.  </span></span><br><span class="line"><span class="variable">$(OBJDIR)</span>/%.o : %.S  </span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_ASSEMBLING)</span> <span class="variable">$&lt;</span>  </span><br><span class="line">    <span class="variable">$(CC)</span> -c <span class="variable">$(ALL_ASFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create preprocessed source for use in sending a bug report.  </span></span><br><span class="line">%.i : %.c  </span><br><span class="line">    <span class="variable">$(CC)</span> -E -mmcu=<span class="variable">$(MCU)</span> -I. <span class="variable">$(CFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span>   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Target: clean project.  </span></span><br><span class="line"><span class="section">clean: begin clean_list end  </span></span><br><span class="line">  </span><br><span class="line">clean_list :  </span><br><span class="line">    @echo  </span><br><span class="line">    @echo <span class="variable">$(MSG_CLEANING)</span>  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.hex  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.eep  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.cof  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.elf  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.map  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.sym  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> <span class="variable">$(TARGET)</span>.lss  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> $(SRC:%.c=<span class="variable">$(OBJDIR)</span>/%.o)  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> $(SRC:%.c=<span class="variable">$(OBJDIR)</span>/%.lst)  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> $(SRC:.c=.s)  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> $(SRC:.c=.d)  </span><br><span class="line">    <span class="variable">$(REMOVE)</span> $(SRC:.c=.i)  </span><br><span class="line">    <span class="variable">$(REMOVEDIR)</span> .dep  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Create object files directory  </span></span><br><span class="line"><span class="variable">$(<span class="built_in">shell</span> mkdir <span class="variable">$(OBJDIR)</span> 2&gt;/dev/null)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Include the dependency files.  </span></span><br><span class="line"><span class="keyword">-include</span> <span class="variable">$(<span class="built_in">shell</span> mkdir .dep 2&gt;/dev/null)</span> <span class="variable">$(<span class="built_in">wildcard</span> .dep/*)</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Listing of phony targets.  </span></span><br><span class="line">.PHONY : all begin finish end sizebefore sizeafter gccversion \  </span><br><span class="line">build elf hex eep lss sym coff extcoff \  </span><br><span class="line">clean clean_list program debug gdb-config  </span><br></pre></td></tr></table></figure>

  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/avr%E7%B3%BB%E5%88%97/">avr系列</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://galaxy2416.github.io/2014/02/06/linux-avr-1/" data-title="avr系列:(一)在linux下搭建avr开发平台 | IcePie&#39;s blog" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/02/07/linux-avr-2/" title="avr系列:(二)avrdude的使用简介和AVR熔丝位">
  <strong>上一篇：</strong><br/>
  <span>
  avr系列:(二)avrdude的使用简介和AVR熔丝位</span>
</a>
</div>


<div class="next">
<a href="/2014/02/05/linux-51-1/"  title="51之linux :(一) 在linux环境下搭建51开发环境">
 <strong>下一篇：</strong><br/> 
 <span>51之linux :(一) 在linux环境下搭建51开发环境
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A4%E7%AF%87%E4%BB%A5Ubuntu%E4%B8%8B%E7%9A%84atmeg16%EF%BC%8Cavr-gcc-usbasp%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AF%B4%E6%98%8E%E3%80%82"><span class="toc-number">1.</span> <span class="toc-text">此篇以Ubuntu下的atmeg16，avr-gcc + usbasp的开发环境搭建来进行说明。</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="galaxy2416" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/51单片机/" title="51单片机">51单片机<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/avr系列/" title="avr系列">avr系列<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/math/" title="math">math<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/program/" title="program">program<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/simple-robots-系列/" title="simple robots 系列">simple robots 系列<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/vim/" title="vim">vim<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/仿人机器人/" title="仿人机器人">仿人机器人<sup>4</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/git-ssh/" title="git ssh">git ssh<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Valkyrie/" title="Valkyrie">Valkyrie<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/artrobot/" title="artrobot">artrobot<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Atlas/" title="Atlas">Atlas<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/cpp/" title="cpp">cpp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/robot/" title="robot">robot<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/第一篇文章/" title="第一篇文章">第一篇文章<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Romeo/" title="Romeo">Romeo<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://sherlockyu.github.io" target="_blank" title="猫哥的小博客">于小猫</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m IcePie. <br/>
			This is my blog.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/galaxy2416" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:gin@mail.elut.edu.cn" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="冰派">冰派</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'galaxy2416';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End --><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  </body>
</html>
